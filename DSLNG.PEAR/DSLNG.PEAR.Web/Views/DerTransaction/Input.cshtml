<style>
    .nav-tabs > li > a {
        color: #ffffff;
    }

    .nav-tabs > li:active > a {
        color: #000000;
    }
</style>
<section id="der-transaction" data-date="@DateTime.Now.ToString("MM/dd/yyyy")">
    <div class="row">
        <div class="title_page" style="border: none!important;">
            <div class="row">
                <div class="title">Der Input</div>
            </div>
        </div>
        <div class="notification"></div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <form class="form-inline">
                <div class="form-group form-list">
                    <font color="#FFFFFF">Date : </font>
                    <input id="currentDate" class="form-control datepicker" type="text">
                    <span class="field-validation-valid" data-valmsg-for="StartInDisplay" data-valmsg-replace="true"></span>
                </div>
            </form>
        </div>
    </div>
    <hr />

    <div class="row economic-indicators" style="margin-bottom: 20px;">
        <div class="col-md-12">
            <a class="btn" role="button" data-toggle="collapse" href="#" aria-expanded="false" aria-controls="collapseExample">
                <h3 style="margin-left: -16px;">Economic Indicator Section-B</h3>
            </a>
            <span class="pull-right" style="border: 1px solid white; border-radius: 5px;">
                <a class="btn btn-input-slide" role="button" data-content-url="@Url.Action("EconomicIndicator",new { date="__date__" })" data-toggle="collapse" href="#collapseEconomic" aria-expanded="false" aria-controls="collapseExample">
                    +
                </a>
            </span>
            <div class="collapse" id="collapseEconomic" style="margin-top: 15px; margin-bottom: 15px;">
            </div>
        </div>
    </div>

    <div class="row forecasted" style="margin-bottom: 20px;">
        <div class="col-md-12">
            <a class="btn" role="button" data-toggle="collapse"  href="#" aria-expanded="false" aria-controls="collapseExample">
                <h3 style="margin-left: -16px;">Forecasted Market Indicator-B</h3>
            </a>
            <span class="pull-right" style="border: 1px solid white; border-radius: 5px;">
                <a class="btn btn-input-slide" role="button" data-toggle="collapse" data-content-url="@Url.Action("ForcastedIndicator",new { date="__date__" })" href="#collapseForecasted" aria-expanded="false" aria-controls="collapseExample">
                    +
                </a>
            </span>
            <div class="collapse" id="collapseForecasted" style="margin-top: 15px; margin-bottom: 15px;">
            </div>
        </div>
    </div>

    <div class="row operation" style="margin-bottom: 20px;">
        <div class="col-md-12">
            <a class="btn" role="button" data-toggle="collapse" href="#" aria-expanded="false" aria-controls="collapseExample">
                <h3 style="margin-left: -16px;">Operation & Engineering Section-J</h3>
            </a>
            <span class="pull-right" style="border: 1px solid white; border-radius: 5px;">
                <a class="btn btn-input-slide" role="button" data-toggle="collapse" data-content-url="@Url.Action("OperationSection",new { date="__date__" })" href="#collapseOperation" aria-expanded="false" aria-controls="collapseExample">
                    +
                </a>
            </span>
            <div class="collapse" id="collapseOperation" style="margin-top: 15px; margin-bottom: 15px;">
            </div>
        </div>
    </div>

    <div class="row marine" style="margin-bottom: 20px;">
        <div class="col-md-12">
            <a class="btn" role="button" data-toggle="collapse" href="#" aria-expanded="false" aria-controls="collapseExample">
                <h3 style="margin-left: -16px;">Marine, Shipping, Cargo Delivery section-C</h3>
            </a>
            <span class="pull-right" style="border: 1px solid white; border-radius: 5px;">
                <a class="btn btn-input-slide" role="button" data-toggle="collapse" data-content-url="@Url.Action("MarineShipping",new { date="__date__" })" href="#collapseMarine" aria-expanded="false" aria-controls="collapseExample">
                    +
                </a>
            </span>
            <div class="collapse" id="collapseMarine" style="margin-top: 15px; margin-bottom: 15px;">
            </div>
        </div>
    </div>

    <div class="row maintanance" style="margin-bottom: 20px;">
        <div class="col-md-12">
            <a class="btn" role="button" data-toggle="collapse" href="#" aria-expanded="false" aria-controls="collapseExample">
                <h3 style="margin-left: -16px;">Maintenance section-D</h3>
            </a>
            <span class="pull-right" style="border: 1px solid white; border-radius: 5px;">
                <a class="btn btn-input-slide" role="button" data-toggle="collapse" data-content-url="@Url.Action("MaintenanceSection",new { date="__date__" })"  href="#collapseMaintanance" aria-expanded="false" aria-controls="collapseExample">
                    +
                </a>
            </span>
            <div class="collapse" id="collapseMaintanance" style="margin-top: 15px; margin-bottom: 15px;">
            </div>
        </div>
    </div>

    <div class="row qhsse" style="margin-bottom: 20px;">
        <div class="col-md-12">
            <a class="btn" role="button" data-toggle="collapse" href="#" aria-expanded="false" aria-controls="collapseExample">
                <h3 style="margin-left: -16px;">QHSSE Section-I</h3>
            </a>
            <span class="pull-right" style="border: 1px solid white; border-radius: 5px;">
                <a class="btn btn-input-slide" role="button" data-toggle="collapse" data-content-url="@Url.Action("QhsseSection",new { date="__date__" })" href="#collapseQhsse" aria-expanded="false" aria-controls="collapseExample">
                    +
                </a>
            </span>
            <div class="collapse" id="collapseQhsse" style="margin-top: 15px; margin-bottom: 15px;">
            </div>
        </div>
    </div>

    <div class="row others">
        <div class="col-md-12">
            <a class="btn" role="button" data-toggle="collapse" href="#" aria-expanded="false" aria-controls="collapseExample">
                <h3 style="margin-left: -16px;">Enabler Section</h3>
            </a>
            <span class="pull-right" style="border: 1px solid white; border-radius: 5px;">
                <a class="btn" role="button" data-toggle="collapse" href="#collapseOthers" aria-expanded="false" aria-controls="collapseExample">
                    +
                </a>
            </span>
            <div class="collapse" id="collapseOthers" style="margin-top: 15px; margin-bottom: 15px;">
                <div class="col-md-12">
                    <div class="col-md-4">
                        <table width="900" border="0" cellpadding="2" cellspacing="2" style="margin-top: 15px; margin-bottom: 15px;">
                            <tr>
                                <td>
                                    <h4 style="margin-top: 20px;">Procurement Section-E</h4>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <label for="" style="margin-top: 20px;">#backlog</label>
                                    <br />
                                    <input type="number" name="" id="" placeholder="number" />
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <label for="" style="margin-top: 20px;">Avg backlog</label>
                                    <br />
                                    <input type="number" name="" id="" placeholder="number" />
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <label for="" style="margin-top: 20px;">Remark</label>
                                    <br />
                                    <input type="text" name="" id="" placeholder="free text" />
                                </td>
                            </tr>
                        </table>
                    </div>
                    <div class="col-md-4">
                        <table width="900" border="0" cellpadding="2" cellspacing="2" style="margin-top: 15px; margin-bottom: 15px;">
                            <tr>
                                <td>
                                    <h4 for="" style="margin-top: 20px;">ICT Infrastructure and System Highlight:-F</h4>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <label for="" style="margin-top: 20px;">Application</label>
                                    <br />
                                    <select>
                                        <option>Select Option</option>
                                        <option>Option 1</option>
                                        <option>Option 2</option>
                                    </select>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <label for="" style="margin-top: 20px;">Colaboration</label>
                                    <br />
                                    <select>
                                        <option>Select Option</option>
                                        <option>Option 1</option>
                                        <option>Option 2</option>
                                    </select>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <label for="" style="margin-top: 20px;">Telco</label>
                                    <br />
                                    <select>
                                        <option>Select Option</option>
                                        <option>Option 1</option>
                                        <option>Option 2</option>
                                    </select>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <label for="" style="margin-top: 20px;">Remark</label>
                                    <br />
                                    <input type="text" name="" id="" placeholder="free text" />
                                </td>
                            </tr>
                        </table>
                    </div>
                    <div class="col-md-4">
                        <table width="900" border="0" cellpadding="2" cellspacing="2" style="margin-top: 15px; margin-bottom: 15px;">
                            <tr>
                                <td>
                                    <h4 for="" style="margin-top: 20px;">GS & FM-G</h4>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <label for="" style="margin-top: 20px;">POB</label>
                                    <br />
                                    <input type="number" placeholder="number" />
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <label for="" style="margin-top: 20px;">F&B</label>
                                    <br />
                                    <select>
                                        <option>Select Option</option>
                                        <option>Option 1</option>
                                        <option>Option 2</option>
                                    </select>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <label for="" style="margin-top: 20px;">Camp</label>
                                    <br />
                                    <select>
                                        <option>Select Option</option>
                                        <option>Option 1</option>
                                        <option>Option 2</option>
                                    </select>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <label for="" style="margin-top: 20px;">Transp</label>
                                    <br />
                                    <select>
                                        <option>Select Option</option>
                                        <option>Option 1</option>
                                        <option>Option 2</option>
                                    </select>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <label for="" style="margin-top: 20px;">Remark</label>
                                    <br />
                                    <input type="text" name="" id="" placeholder="free text" />
                                </td>
                            </tr>
                        </table>
                    </div>
                </div>
                <div class="col-md-12" style="margin-top: 30px;">
                    <div class="col-md-6">
                        <h4 style="color: white;">Community Relation and Govt Engagement Highlight-H</h4>
                        <table border="0">
                            <tr>
                                <td><label class="control-label">Remark</label></td>
                            </tr>
                            <tr>
                                <td>
                                    <textarea class="form-control allow-html"></textarea>
                                </td>
                            </tr>
                        </table>
                    </div>
                    <div class="col-md-6">
                        <table border="0">
                            <tr>
                                <td><h4 class="control-label">Daily Highlight-K</h4></td>
                            </tr>
                            <tr>
                                <td>
                                    <textarea class="form-control allow-html"></textarea>
                                </td>
                            </tr>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <hr />
    <div class="col-md-12" style="margin-bottom: 30px;">
        <div class="col-md-3">
            <table width="900" border="0" cellpadding="2" cellspacing="2">
                <tr>
                    <td>
                        <label for="">Prepared By-L</label>
                        <br />
                        <select>
                            <option>Select Option</option>
                            <option>Option 1</option>
                            <option>Option 2</option>
                        </select>
                    </td>
                </tr>
            </table>
        </div>
        <div class="col-md-3">
            <table width="900" border="0" cellpadding="2" cellspacing="2">
                <tr>
                    <td>
                        <label for="">Reviewed By-M</label>
                        <br />
                        <select>
                            <option>Select Option</option>
                            <option>Option 1</option>
                            <option>Option 2</option>
                        </select>
                    </td>
                </tr>
            </table>
        </div>
        <div class="col-md-6" style="margin-top: 15px;">
            <a href="#" class="btn btn-master-rgw btn-primary"><i class="fa fa-check-circle"></i> Save</a>
            <a href="#" class="btn btn-master-rgw btn-primary"><i class="fa fa-search"></i> Check</a>
            <a href="#" class="btn btn-master-rgw btn-primary"><i class="fa fa-file-archive-o"></i> DER Preview</a>
        </div>
    </div>
</section>

<script type="text/javascript" src="~/Content/datepicker/js/bootstrap-datepicker.js"></script>
<script type="text/javascript">
    //$(document).ready(function () {
    //    $('#currentDate').val('02/18/2016');
    //    if ($('.der-display').length) {
    //        $('.datepicker').datetimepicker({
    //            format: "MM/DD/YYYY",
    //            focusOnShow: false
    //        }).on('dp.change', function (e) {
    //            $("#currentDate").blur();
    //            reloadView();
    //        });
    //    };
    //});

    function moveFieldTo(event, fieldId) {
        var inputid = $(event.target).attr("id");
        if (event.keyCode == 13) {
            $(inputid).removeClass("der-text-yesterday");
            document.getElementById(inputid).className = "form-control";
            document.getElementById(fieldId).focus();
            event.preventDefault();
            return true;
        }
    }
</script>

@section Scripts {
    <script type="text/javascript">
        function getQueryVariable(variable) {
            var query = window.location.search.substring(1);
            var vars = query.split('&');
            for (var i = 0; i < vars.length; i++) {
                var pair = vars[i].split('=');
                if (decodeURIComponent(pair[0]) == variable) {
                    return decodeURIComponent(pair[1]);
                }
            }
            return null;
        }
        function updateQueryStringParameter(uri, key, value) {
            var re = new RegExp("([?&])" + key + "=.*?(&|$)", "i");
            var separator = uri.indexOf('?') !== -1 ? "&" : "?";
            if (uri.match(re)) {
                return uri.replace(re, '$1' + key + "=" + value + '$2');
            }
            else {
                return uri + separator + key + "=" + value;
            }
        }

        var reloadView = function () {
            window.document.location = updateQueryStringParameter(window.location.href, "date", encodeURIComponent($('.datepicker').val()));
        };
        $(document).ready(function () {
            var date = getQueryVariable('date');
            if (date == null) {
                $('.datepicker').val($('#der-transaction').data('date'));
            } else {
                $('.datepicker').val(decodeURIComponent(date));
            }
            $('.datepicker').datetimepicker({
                format: "MM/DD/YYYY",
                focusOnShow: false
            }).on('dp.change', function (e) {
                $(".datepicker").blur();
                reloadView();
            });
            var currentDate = $('.datepicker').val();
            tinyMCE.init({
                selector: ".allow-html",
                menubar: false,
                plugins: [
                    "advlist autolink lists link image charmap print preview anchor",
                    "searchreplace visualblocks code fullscreen",
                    "insertdatetime media table contextmenu paste"
                ],
                toolbar: "insertfile undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image"
            });

            $('.collapse').on('hide.bs.collapse', function () {
                var tombol = $(this).attr("id");
                tombol = $("a[href='#" + tombol + "']").text("+");
            });

            $('.collapse').on('show.bs.collapse', function () {
                var tombol = $(this).attr("id");
                tombol = $("a[href='#" + tombol + "']").text("-");
            });

            $('.btn-input-slide').click(function (e) {
                e.preventDefault();
                var $this = $(this);
                var target = $this.attr('href');
                if (!$(target).children().length) {
                    var contentUrl = $this.data('content-url');
                    contentUrl = contentUrl.replace('__date__', encodeURIComponent(currentDate));
                    $.get(contentUrl, function (data) {
                        $(target).html(data);
                        tinyMCE.init({
                            selector: ".allow-html",
                            menubar: false,
                            plugins: [
                                "advlist autolink lists link image charmap print preview anchor",
                                "searchreplace visualblocks code fullscreen",
                                "insertdatetime media table contextmenu paste"
                            ],
                            toolbar: "insertfile undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image"
                        });
                    })
                }
            });

        });


    </script>
}