@model DSLNG.PEAR.Web.ViewModels.KpiTarget.CreateKpiTargetViewModel

@{
    ViewBag.Title = "Create KPI Target";
}

<h3>@ViewBag.Title</h3>
<hr />
@Html.Partial("_MessageResponse")
<div class="form-inline clearfix">
    <label>Periode Type : </label>
    <select id="periodeType" class="form-control">
        <option value="yearly">Yearly</option>
        <option value="monthly">Monthly</option>
    </select>
</div><br/>

<div class="row">
    <div class="col-md-12">
        <form action="@Url.Action("Create")" method="POST">
            @*<div class="form-group">
                @Html.LabelFor(model => model.PeriodeTypeValue, new { @class = "control-label" })
                @Html.DropDownListFor(model => model.PeriodeTypeValue, Model.PeriodeTypeList, new { @class = "form-control" })
                @Html.ValidationMessageFor(model => model.PeriodeTypeValue)
            </div>*@
            @for (int i = 0; i < Model.PillarKpiTarget.Count; i++)
            {
                <div class="form-group">
                    @Html.DropDownListFor(model => Model.PillarKpiTarget[i].PillarId, Model.PillarKpiTarget[i].PillarList, new { @class = "form-control" })
                    @Html.ValidationMessageFor(model => Model.PillarKpiTarget[i].PillarId)
                </div>
                for (int k = 0; k < Model.PillarKpiTarget[i].KpiTargetList.Count; k++)
                {
                <div class="col-md-3">
                    <div class="form-group">
                        @Html.DropDownListFor(model => Model.PillarKpiTarget[i].KpiTargetList[k].KpiId, Model.PillarKpiTarget[i].KpiTargetList[k].KpiList, new { @class = "form-control" })
                        @Html.ValidationMessageFor(model => Model.PillarKpiTarget[i].KpiTargetList[k].KpiId)
                    </div>
                </div>
                <div class="col-md-1">
                    <div class="form-group">
                        @Html.DisplayFor(model => Model.PillarKpiTarget[i].KpiTargetList[k].Kpi.Unit)
                    </div>
                </div>
                <div class="col-md-2">
                    <div class="form-group">
                        @Html.TextBoxFor(model => Model.PillarKpiTarget[i].KpiTargetList[k].Remark, Model.PillarKpiTarget[i].KpiTargetList[k].Remark, new { @class = "form-control", @placeholder = "Remark" })
                        @Html.ValidationMessageFor(model => Model.PillarKpiTarget[i].KpiTargetList[k].Remark)
                    </div>
                </div>
                <div class="col-md-6 yearly-content" style="display: none">
                    <div class="form-group">
                        @{
                    var idYearly = "PillarKpiTarget_" + i + "__KpiTargetList_" + k + "__ValueList_0";
                    var nameYearly = "PillarKpiTarget[" + i + "].KpiTargetList[" + k + "].ValueList[0]";
                        }
                        <input type="text" name="@nameYearly" id="@idYearly" class="form-control" placeholder="Yearly">
                        @Html.HiddenFor(model => Model.PillarKpiTarget[i].KpiTargetList[k].Periode)
                        @Html.HiddenFor(model => Model.PillarKpiTarget[i].KpiTargetList[k].IsActive)
                    </div>

                </div>
@*<div class="col-md-3">
                        <div class="form-group">
                            <label class="control-label">Monthly Value</label>
                        </div>
                    </div>*@
                <div class="col-md-6 monthly-content" style="display: none">
                    @for (int v = 1; v <= 12; v++)
                    {
                        <div class="col-md-1">
                            <div class="form-group">
                                @{
                        var id = "PillarKpiTarget_" + i + "__KpiTargetList_" + k + "__ValueList_" + v;
                        var name = "PillarKpiTarget[" + i + "].KpiTargetList[" + k + "].ValueList[" + v + "]";
                        var periode = Model.PillarKpiTarget[i].KpiTargetList[k].Periode;
                        var month = new DateTime(periode.Year, v, 1).ToString("MMM");
                                }
                                <input type="text" name="@name" id="@id" class="form-control">
                                <label class="control-label">@month</label>
                            </div>

                        </div>
                    }

                </div>
                }
            }
            <button type="submit" class="btn btn-default">Submit</button>
            <a href="@Url.Action("Index")" class="btn btn-default">Cancel</a>

        </form>
    </div>
</div>

@section Scripts {
    <script type="text/javascript">
        $(document).ready(function () {
            $('.yearly-content').show();
            $('.monthly-content').hide();

            $('#periodeType').change(function () {
                //alert('asas');
                var val = $(this).val();
                if (val === 'yearly') {
                    $('.yearly-content').show();
                    $('.monthly-content').hide();
                } else {
                    $('.yearly-content').hide();
                    $('.monthly-content').show();
                }

            });
        })
    </script>

}

