@using System.Linq;
@model DSLNG.PEAR.Web.ViewModels.PmsConfigDetails.CreatePmsConfigDetailsViewModel
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
    <span
        aria-hidden="true">&times;</span></button>
<div class="whitebox">
    <h4>Add KPI</h4>
    <form class="form-group" action="@Url.Action("Create")" method="POST">
        @Html.HiddenFor(x => x.PmsConfigId)
        <div class="form-group form-list">
            <label>KPI</label>
            @Html.DropDownListFor(x => x.KpiId, Model.Kpis, "Select KPI", new { @class = "form-control ddl-kpi" })
            @Html.ValidationMessageFor(x => x.KpiId)
        </div>

        <div class="form-group form-list">
            <label>Scoring Type</label>
            @Html.DropDownListFor(x => x.ScoringType, Model.ScoringTypes, "Select Scoring Type", new { @class = "form-control" })
            @Html.ValidationMessageFor(x => x.ScoringType)
        </div>

        <div class="form-group form-list">
            <label>Weight</label>
            @Html.TextBoxFor(x => x.Weight, new { @class = "form-control" })
            @Html.ValidationMessageFor(x => x.Weight)
        </div>

        @Html.Partial("_ScoringIndicator", Model.ScoreIndicators)
        <div class="form-group form-list">
            <button type="submit" class="btn btn-default btn-darkblue">Submit</button>
            <button type="button" class="btn btn-default btn-darkblue" data-dismiss="modal" aria-label="Close">Cancel</button>
        </div>

    </form>
</div>

@*<script type="text/javascript">
    $(document).ready(function () {
        $('.ddl-pillar').change(function () {
            var pillarId = $(this).val();
            var ddlKpi = $('.ddl-kpi');
            $.ajax({
                url: '@Url.Action("GetKpis")',
                data: { id: pillarId },
                type: 'GET',
                success: function (data) {
                    ddlKpi.html('');
                    $.each(data, function (id, option) {
                        ddlKpi.append($('<option></option>').val(option.id).html(option.name));
                    });
                }
            });

        });
    })
</script>*@

